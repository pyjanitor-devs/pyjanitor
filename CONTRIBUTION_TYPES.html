
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Types of Contributions &#8212; pyjanitor  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="types-of-contributions">
<span id="contribution-types"></span><h1>Types of Contributions<a class="headerlink" href="#types-of-contributions" title="Permalink to this headline">¶</a></h1>
<section id="write-documentation">
<h2>Write Documentation<a class="headerlink" href="#write-documentation" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">pyjanitor</span></code> could always use more documentation,
whether as part of the official pyjanitor docs, in docstrings, or the examples gallery.</p>
<p>During sprints, we require newcomers to the project to
first contribute a documentation fix before contributing a code fix.
Doing so has numerous benefits:</p>
<ol class="arabic simple">
<li><p>You become familiar with the project by first reading through the docs.</p></li>
<li><p>Your documentation contribution will be a pain point that you have full context on.</p></li>
<li><p>Your contribution will be impactful because documentation is the project’s front-facing interface.</p></li>
<li><p>Your first contribution will be simpler, because you won’t have to wrestle with build systems.</p></li>
<li><p>You can choose between getting set up locally first (recommended),
or instead directly making edits on the GitHub web UI (also not a problem).</p></li>
<li><p>Every newcomer is equal in our eyes, and it’s the most egalitarian way to get started (regardless of experience).</p></li>
</ol>
<p>Remote contributors outside of sprints and prior contributors
who are joining us at the sprints need not adhere to this rule,
as a good prior assumption is that you are a motivated user of the library already.
If you have made a prior pull request to the library,
we would like to encourage you to mentor newcomers in lieu of coding contributions.</p>
<p>Documentation can come in many forms. For example, you might want to contribute:</p>
<ul class="simple">
<li><p>Fixes for a typographical, grammatical, or spelling error.</p></li>
<li><p>Changes for a docstring that was unclear.</p></li>
<li><p>Clarifications for installation/setup instructions that are unclear.</p></li>
<li><p>Corrections to a sentence/phrase/word choice that didn’t make sense.</p></li>
<li><p>New example/tutorial notebooks using the library.</p></li>
<li><p>Edits to existing tutorial notebooks with better code style.</p></li>
</ul>
<p>In particular, contributing new tutorial notebooks and
improving the clarity of existing ones are great ways to
get familiar with the library and find pain points that
you can propose as fixes or enhancements to the library.</p>
</section>
<section id="report-bugs">
<h2>Report Bugs<a class="headerlink" href="#report-bugs" title="Permalink to this headline">¶</a></h2>
<p>Report bugs at <a class="reference external" href="https://github.com/pyjanitor-devs/pyjanitor/issues">https://github.com/pyjanitor-devs/pyjanitor/issues</a>.</p>
<p>If you are reporting a bug, please include:</p>
<ul class="simple">
<li><p>Your operating system name and version.</p></li>
<li><p>Any details about your local setup that might be helpful in troubleshooting.</p></li>
<li><p>Detailed steps to reproduce the bug.</p></li>
</ul>
</section>
<section id="fix-bugs">
<h2>Fix Bugs<a class="headerlink" href="#fix-bugs" title="Permalink to this headline">¶</a></h2>
<p>Look through the GitHub issues for bugs.
Anything tagged with <code class="docutils literal notranslate"><span class="pre">bug</span></code> and <code class="docutils literal notranslate"><span class="pre">available</span> <span class="pre">to</span> <span class="pre">hack</span> <span class="pre">on</span></code> is open to
whoever wants to implement it.</p>
<p>Do be sure to claim the issue for yourself by indicating,
“I would like to work on this issue.”
If you would like to discuss it further before going forward,
you are more than welcome to discuss on the GitHub issue tracker.</p>
</section>
<section id="implement-features">
<h2>Implement Features<a class="headerlink" href="#implement-features" title="Permalink to this headline">¶</a></h2>
<p>Look through the GitHub issues for features. Anything tagged with <code class="docutils literal notranslate"><span class="pre">enhancement</span></code>
and <code class="docutils literal notranslate"><span class="pre">available</span> <span class="pre">to</span> <span class="pre">hack</span> <span class="pre">on</span></code> are open to whoever wants to implement it.</p>
<section id="key-ingredients">
<h3>Key Ingredients<a class="headerlink" href="#key-ingredients" title="Permalink to this headline">¶</a></h3>
<p>To ensure <code class="docutils literal notranslate"><span class="pre">pyjanitor</span></code>’s code quality and long-term maintainability
(both aspects lay the groundwork for growing community engagement),
we ask our contributors to</p>
<p>1. Include good documentation
(<a class="reference internal" href="#docstring-guidelines"><span class="std std-ref">Docstring Guidelines</span></a>)</p>
<p>2. Align code patterns with existing <code class="docutils literal notranslate"><span class="pre">pyjanitor</span></code> functions
(<a class="reference internal" href="#code-pattern-guidelines"><span class="std std-ref">Code Pattern Guidelines</span></a>)</p>
<p>3. Set up and carry out unit tests
(<a class="reference internal" href="#unit-test-guidelines"><span class="std std-ref">Unit Test Guidelines</span></a>)</p>
<p>These three elements consitute the minimum requirement for feature contributions.
In the next three sections, we will dive deeper into these requirements.</p>
</section>
<section id="docstring-guidelines">
<span id="id1"></span><h3>Docstring Guidelines<a class="headerlink" href="#docstring-guidelines" title="Permalink to this headline">¶</a></h3>
<p>For a python function, its docstring is a string that
documents what the function does and what the inputs/outputs should be.
Docstring conventions have <a class="reference external" href="http://www.sphinx-doc.org/en/1.8/usage/extensions/napoleon.html#confval-napoleon_numpy_docstring">various flavors</a>.
In <code class="docutils literal notranslate"><span class="pre">pyjanitor</span></code>, we use the <a class="reference external" href="https://thomas-cokelaer.info/tutorials/sphinx/docstring_python.html">Sphinx style docstring</a> that
is built on top of the <a class="reference external" href="http://openalea.gforge.inria.fr/doc/openalea/doc/_build/html/source/sphinx/rest_syntax.html#headings">reStructuredText (reST) markup</a> language.</p>
<p>reST syntax, like python, is sensitive to <strong>indentation</strong>,
and all the text units (e.g., heading, paragraph, and code block) must be
separated by <strong>blank lines</strong> from each other.
Proper rendering of the web docs you are browsing through right now
relies on our contributors’ adherence to these reST syntax rules.</p>
<p>Below is a docstring example from <code class="docutils literal notranslate"><span class="pre">pyjanitor</span></code>’s <code class="docutils literal notranslate"><span class="pre">rename_columns</span></code> function.
For illustration purposes,
we also add annotations (surrounded by square brackets) to
highlight all the key sections
(Note: These annotations are NOT part of the docstring).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pf</span><span class="o">.</span><span class="n">register_dataframe_method</span>
<span class="k">def</span> <span class="nf">rename_columns</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">new_column_names</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    [short summary]</span>
<span class="sd">    Rename columns in place.</span>

<span class="sd">    [examples]</span>
<span class="sd">    Functional usage example:</span>

<span class="sd">    .. code-block:: python</span>

<span class="sd">        df = rename_columns({&quot;old_column_name&quot;: &quot;new_column_name&quot;})</span>

<span class="sd">    Method chaining example:</span>

<span class="sd">    .. code-block:: python</span>

<span class="sd">        import pandas as pd</span>
<span class="sd">        import janitor</span>
<span class="sd">        df = pd.DataFrame(...).rename_columns({&quot;old_column_name&quot;:</span>
<span class="sd">        &quot;new_column_name&quot;})</span>

<span class="sd">    [notes]</span>
<span class="sd">    This is just syntactic sugar/a convenience function for renaming one column</span>
<span class="sd">    at a time. If you are convinced that there are multiple columns in need of</span>
<span class="sd">    changing, then use the :py:meth:`pandas.DataFrame.rename` method.</span>

<span class="sd">    [parameters]</span>
<span class="sd">    :param df: The pandas DataFrame object.</span>
<span class="sd">    :param new_column_names: A dictionary of old and new column names.</span>
<span class="sd">    [returns]</span>
<span class="sd">    :returns: A pandas DataFrame with renamed columns.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">check_column</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">new_column_names</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
    <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">new_column_names</span><span class="p">)</span>
</pre></div>
</div>
<p>Let’s expand on this example:</p>
<p>Docstrings should always be surrounded by <strong>triple double quotes</strong>. i.e.,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">I am a docstring</span>

<span class="sd">I can take up several lines</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>The key sections of a docstring are:</p>
<p>1. <em>short summary</em>: A concise one-line summary about what the function does.
It should NOT include variable names or function names.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Rename columns in place.</span>

<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>2. <em>examples</em>: Examples play an important role in
ensuring user-friendliness of the API.
For <code class="docutils literal notranslate"><span class="pre">pyjanitor</span></code>, ideal examples should demonstrate both the functional and
the method chaining usages of the function.</p>
<p>Each usage example should have a short text description and
a code block (marked by the <cite>.. code-block:: python</cite> <a class="reference external" href="http://docutils.sourceforge.net/docs/ref/rst/directives.html#code">reST directive</a>).
The text description, the <cite>.. code-block:: python</cite> directive, and
the content of the code block must be separated by
<strong>blank lines</strong> from one another
(see <a class="reference internal" href="#docstring-guidelines"><span class="std std-ref">Docstring Guidelines</span></a>).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Functional usage example:</span>

<span class="sd">.. code-block:: python</span>

<span class="sd">    df = rename_columns({&quot;old_column_name&quot;: &quot;new_column_name&quot;})</span>

<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>3. <em>notes</em>: Notes should provide additional information that
users and maintainers should be aware of. e.g.,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This is just syntactic sugar/a convenience function for renaming one column</span>
<span class="sd">at a time. If you are convinced that there are multiple columns in need of</span>
<span class="sd">changing, then use the :py:meth:`pandas.DataFrame.rename` method.</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>4. <em>parameters</em>: Itemized description of the function’s arguments and
keyword arguments. Each item should follow the format of</p>
<p><code class="docutils literal notranslate"><span class="pre">:param</span> <span class="pre">&lt;arg</span> <span class="pre">name&gt;:</span> <span class="pre">&lt;arg</span> <span class="pre">description&gt;,</span> <span class="pre">default</span> <span class="pre">to</span> <span class="pre">&lt;default</span> <span class="pre">value&gt;</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">:param df: The pandas DataFrame object.</span>
<span class="sd">:param new_column_names: A dictionary of old and new column names.</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>5. <em>returns</em>: Itemized description of returned values.
Each item should follow the format of</p>
<p><code class="docutils literal notranslate"><span class="pre">:returns:</span> <span class="pre">&lt;return</span> <span class="pre">description&gt;.</span></code></p>
<p>For <code class="docutils literal notranslate"><span class="pre">pyjanitor</span></code> functions,
the returned values typically are pandas <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>. e.g.,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">:returns: A pandas DataFrame with renamed columns.</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
<div class="admonition note" id="docstring-notes">
<p class="admonition-title">Note</p>
<p>We may go back-and-forth a few times on the docstring.
The docstring is a particularly important part of developer documentation;
therefore, we may want much more detail than you are used to providing.
This is for maintenance purposes:
Contributions from new contributors frequently end up being maintained by
the maintainers, and hence we would err on the side of
providing more contextual information than less,
especially regarding design choices.</p>
</div>
</section>
<section id="code-pattern-guidelines">
<span id="id2"></span><h3>Code Pattern Guidelines<a class="headerlink" href="#code-pattern-guidelines" title="Permalink to this headline">¶</a></h3>
<p>Let’s continue using the same code example and
shift our focus to the code patterns:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="linenos">1</span> <span class="nd">@pf</span><span class="o">.</span><span class="n">register_dataframe_method</span>
</span><span class="hll"><span class="linenos">2</span> <span class="k">def</span> <span class="nf">rename_columns</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">new_column_names</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
</span><span class="linenos">3</span>     <span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">4</span><span class="sd">     Docstring as shown above; Omitted here</span>
<span class="linenos">5</span><span class="sd">     &quot;&quot;&quot;</span>
<span class="linenos">6</span>     <span class="n">check_column</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">new_column_names</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
<span class="hll"><span class="linenos">7</span>     <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">new_column_names</span><span class="p">)</span>
</span></pre></div>
</div>
<p>The three highlighted lines (line 1, 2, and 7) constitute
the code pattern that
is frequently used in <code class="docutils literal notranslate"><span class="pre">pyjanitor</span></code> implementations:</p>
<ul class="simple">
<li><p>Line 1: <code class="docutils literal notranslate"><span class="pre">&#64;pf.register_dataframe_method</span></code></p></li>
</ul>
<p>This <a class="reference external" href="https://realpython.com/primer-on-python-decorators/">decorator</a> comes from
<a class="reference external" href="https://pypi.org/project/pandas-flavor/">pandas-flavor</a>.
It is the “magic” that allows <code class="docutils literal notranslate"><span class="pre">pyjanitor</span></code> code to
use just one set of implementations (like this <cite>rename_columns</cite> function) for
both the functional and the method chaining usages of the API.
In your new feature or feature enhancement,
you are highly likely to start your function with this decorator line
(or see it in the function that you are enhancing).</p>
<ul class="simple">
<li><p>Line 2 and 7: The <em>dataframe in, dataframe out</em> function signature</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">rename_columns</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">new_column_names</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
    <span class="o">...</span>
    <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">new_column_names</span><span class="p">)</span>
</pre></div>
</div>
<p>The function signature should take a pandas <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> as
the input and return a pandas <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> as the output.
Any manipulations to the dataframe should be implemented inside the function.
The standard functionality of pyjanitor methods that
we are moving towards is to mutate the input <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> itself.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">pyjanitor</span></code> code uses <a class="reference external" href="https://docs.python.org/3/library/typing.html">type hints</a>
in function definitions.
Even though Python–a dynamic typing language–by default does not do
any type checking at runtime,
adding type hints helps simplify code documentation
(otherwise we would need to use docstrings to
document argument types and return types) and over time,
could help build and maintain a clearner code architecture
(forces us to think about types as we write the code).
Moreover, with type hints,
type checkers such as <a class="reference external" href="http://mypy-lang.org/">Mypy</a> could be used as
part of the code testing.
For these reasons, we ask our contributors to use type hints.</p>
</div>
</section>
<section id="unit-test-guidelines">
<span id="id3"></span><h3>Unit Test Guidelines<a class="headerlink" href="#unit-test-guidelines" title="Permalink to this headline">¶</a></h3>
<p>Unit tests form the basic immune system for a code base.
For this reason, all <code class="docutils literal notranslate"><span class="pre">pyjanitor</span></code> features,
regardless of being a brand-new function or an enhancement to an existing function,
should have accompanying tests.</p>
<p><code class="docutils literal notranslate"><span class="pre">pyjanitor</span></code> uses the <a class="reference external" href="https://docs.pytest.org/en/latest/index.html">pytest</a> framework
to carry out unit tests.
Any code contributions should at least have <a class="reference external" href="https://www.freecodecamp.org/news/intro-to-property-based-testing-in-python-6321e0c2f8b/">example-based tests</a>.
Contributors who have experiences in <a class="reference external" href="https://www.freecodecamp.org/news/intro-to-property-based-testing-in-python-6321e0c2f8b/">property-based tests</a>
can use the <a class="reference external" href="https://hypothesis.readthedocs.io/en/latest/">Hypothesis</a> framework to
automatically generate example dataframes
(We provide a number of dataframe-generating strategies in <cite>janitor.testing_utils.strategies</cite>).</p>
<p>But <em>where should we put the tests?</em> To answer this question,
let’s look at the structure of the current <code class="docutils literal notranslate"><span class="pre">pyjanitor</span></code> codes:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span> pyjanitor/janitor
 ├── __init__.py
 ├── biology.py
 ├── chemistry.py
 ├── errors.py
 ├── finance.py
 ├── functions.py
 ├── io.py
 ├── testing_utils
 │   ├── __init__.py
 │   ├── date_data.py
<span class="hll"> │   └── strategies.py  <span class="c1"># contains dataframe-generating strategies</span>
</span> └── utils.py
</pre></div>
</div>
<p>In this tree diagram, all the top level <code class="docutils literal notranslate"><span class="pre">*.py</span></code> files are
the <strong>modules</strong> of the <code class="docutils literal notranslate"><span class="pre">pyjanitor</span></code> library.
The accompanying tests files are in the <code class="docutils literal notranslate"><span class="pre">pyjanitor/tests</span></code> directory and
has a structure as shown below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span> pyjanitor/tests
 ├── biology
 │   └── test_join_fasta.py
 ├── chemistry
 │   ├── test_maccs_keys_fingerprint.py
 │   ├── test_molecular_descriptors.py
 │   ├── ...
<span class="hll"> ├── conftest.py  <span class="c1"># contains test dataframes</span>
</span> ├── finance
 │   └── test_convert_currency.py
 ├── functions
 │   ├── test_add_column.py
 │   ├── test_add_columns.py
 │   ├── ...
 ├── io
 │   └── test_read_csvs.py
 ├── test_data
 │   ├── corrected_smiles.txt
 │   ├── sequences.fasta
 │   └── sequences.tsv
 ├── test_df_registration.py
 └── utils
     ├── test_check_column.py
     ├── test_clean_accounting_column.py
     ├── ...
</pre></div>
</div>
<p>You can see that the naming and organization convention for unit tests:
That is, unit tests for a <strong>function</strong> inside a <strong>module</strong> should be in</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tests/&lt;module_name&gt;/test_&lt;function_name&gt;.py
</pre></div>
</div>
<p>The highlighted <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> contains <strong>test dataframes</strong> that
are implemented as <a class="reference external" href="http://doc.pytest.org/en/latest/fixture.html">pytest fixtures</a>.</p>
<p>To make this more concrete, let’s return to the <code class="docutils literal notranslate"><span class="pre">rename_columns</span></code> example.</p>
<ol class="arabic simple">
<li><p><em>Where is the test data?</em></p></li>
</ol>
<p>The test <code class="docutils literal notranslate"><span class="pre">dataframe</span></code> in <code class="docutils literal notranslate"><span class="pre">pyjanitor/tests/confest.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
 <span class="kn">import</span> <span class="nn">pytest</span>


<span class="hll"> <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
</span> <span class="k">def</span> <span class="nf">dataframe</span><span class="p">():</span>
     <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
         <span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span><span class="p">,</span>
         <span class="s2">&quot;Bell__Chart&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.234_523_45</span><span class="p">,</span> <span class="mf">2.456_234</span><span class="p">,</span> <span class="mf">3.234_612_5</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span><span class="p">,</span>
         <span class="s2">&quot;decorated-elephant&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span><span class="p">,</span>
         <span class="s2">&quot;animals@#$%^&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;rabbit&quot;</span><span class="p">,</span> <span class="s2">&quot;leopard&quot;</span><span class="p">,</span> <span class="s2">&quot;lion&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span><span class="p">,</span>
         <span class="s2">&quot;cities&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Cambridge&quot;</span><span class="p">,</span> <span class="s2">&quot;Shanghai&quot;</span><span class="p">,</span> <span class="s2">&quot;Basel&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span><span class="p">,</span>
     <span class="p">}</span>
     <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
     <span class="k">return</span> <span class="n">df</span>
</pre></div>
</div>
<p>The highlighted pytest <a class="reference external" href="https://realpython.com/primer-on-python-decorators/">decorator</a>
<code class="docutils literal notranslate"><span class="pre">&#64;pytest.fixture</span></code> turns <code class="docutils literal notranslate"><span class="pre">dataframe</span></code> from a regular function to a pytest fixture.
This then allows us to
<strong>inject</strong> the <code class="docutils literal notranslate"><span class="pre">dataframe</span></code> into our test function as shown below.</p>
<ol class="arabic simple" start="2">
<li><p><em>How should the test look like?</em></p></li>
</ol>
<p>Now let’s look at the test for the <code class="docutils literal notranslate"><span class="pre">rename_columns</span></code>
(in <code class="docutils literal notranslate"><span class="pre">pyjanitor/janitor/functions.py</span></code>)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span> <span class="kn">import</span> <span class="nn">pytest</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span>
<span class="hll"><span class="linenos"> 4</span> <span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">functions</span>
</span><span class="hll"><span class="linenos"> 5</span> <span class="k">def</span> <span class="nf">test_rename_columns</span><span class="p">(</span><span class="n">dataframe</span><span class="p">):</span>
</span><span class="linenos"> 6</span>     <span class="n">df</span> <span class="o">=</span> <span class="n">dataframe</span><span class="o">.</span><span class="n">clean_names</span><span class="p">()</span><span class="o">.</span><span class="n">rename_columns</span><span class="p">(</span>
<span class="linenos"> 7</span>         <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="s2">&quot;index&quot;</span><span class="p">,</span> <span class="s2">&quot;bell_chart&quot;</span><span class="p">:</span> <span class="s2">&quot;chart&quot;</span><span class="p">}</span>
<span class="linenos"> 8</span>     <span class="p">)</span>
<span class="hll"><span class="linenos"> 9</span>     <span class="k">assert</span> <span class="nb">set</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span>
</span><span class="hll"><span class="linenos">10</span>         <span class="p">[</span><span class="s2">&quot;index&quot;</span><span class="p">,</span> <span class="s2">&quot;chart&quot;</span><span class="p">,</span> <span class="s2">&quot;decorated_elephant&quot;</span><span class="p">,</span> <span class="s2">&quot;animals@#$%^&quot;</span><span class="p">,</span> <span class="s2">&quot;cities&quot;</span><span class="p">]</span>
</span><span class="hll"><span class="linenos">11</span>     <span class="p">)</span>
</span><span class="hll"><span class="linenos">12</span>     <span class="k">assert</span> <span class="s2">&quot;a&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
</span></pre></div>
</div>
<p>The highlighted lines denote the pattern for testing:</p>
<ul class="simple">
<li><p>Line 4: <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.functions</span></code></p></li>
</ul>
<p>This decorator is a <a class="reference external" href="http://doc.pytest.org/en/latest/example/markers.html">custom pytest mark</a>.
You will often see it at the top of each test function following the convention of
<code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.&lt;module_name&gt;</span></code>.
This mark allows us to restrict a test run to only run tests marked with <cite>&lt;module_name&gt;</cite>.
For example, we can run all the test with the <code class="docutils literal notranslate"><span class="pre">pytest.mark.functions</span></code> mark:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># run `pytest -h` in your terminal to check all available options</span>
$ pytest -v -m functions --cov
</pre></div>
</div>
<p>Or conversely, we can run all the tests <em>except</em> the <code class="docutils literal notranslate"><span class="pre">pytest.mark.functions</span></code> ones:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># run `pytest -h` in your terminal to check all available options</span>
$ pytest -v -m <span class="s2">&quot;not functions&quot;</span> --cov
</pre></div>
</div>
<ul class="simple">
<li><p>Line 5: <code class="docutils literal notranslate"><span class="pre">dataframe</span></code> injection</p></li>
</ul>
<p>Upon test function definition, the test <code class="docutils literal notranslate"><span class="pre">dataframe</span></code> fixture is injected.</p>
<ul class="simple">
<li><p>Line 9-12: assertions for example-based tests</p></li>
</ul>
<p>After using the function in the test (line 6-8),
we use <code class="docutils literal notranslate"><span class="pre">assert</span></code> statements to carry out example-based tests using fixed inputs
and fixed, expected outputs.</p>
<ol class="arabic simple" start="3">
<li><p><em>How do we run the test?</em></p></li>
</ol>
<ul class="simple">
<li><p>To run only your test:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># In `pyjanitor/tests/&lt;module_name&gt;`</span>
$ pytest -v test_&lt;function_name&gt;.py --cov
</pre></div>
</div>
<ul class="simple">
<li><p>To run all the tests:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Under `pyjanitor` top level directory (i.e., where `Makefile` is)</span>
$ make <span class="nb">test</span>
</pre></div>
</div>
<p>This is the basic structure of unit tests.
For your own tests, you can either use existing test data in <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code>,
or add your own test data to that file by following the same fixture pattern.</p>
</section>
</section>
<section id="submit-feedback">
<h2>Submit Feedback<a class="headerlink" href="#submit-feedback" title="Permalink to this headline">¶</a></h2>
<p>The best way to send feedback is to file an issue at <a class="reference external" href="https://github.com/pyjanitor-devs/pyjanitor/issues">https://github.com/pyjanitor-devs/pyjanitor/issues</a>.</p>
<p>If you are proposing a feature:</p>
<ul class="simple">
<li><p>Explain in detail how it would work.</p></li>
<li><p>Keep the scope as narrow as possible, to make it easier to implement.</p></li>
<li><p>Remember that this is a volunteer-driven project, and that contributions
are welcome :)</p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/logo_title.svg" alt="Logo"/>
    
  </a>
</p>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference/index.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Contributors</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, PyJanitor devs.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.1.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/CONTRIBUTION_TYPES.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>