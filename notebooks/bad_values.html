
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Replacing Bad Values &#8212; pyjanitor  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "document", "processHtmlClass": "math|output_area"}}</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Processing Bird Call Data" href="bird_call.html" />
    <link rel="prev" title="Processing Anime Data" href="anime.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<section id="Replacing-Bad-Values">
<h1>Replacing Bad Values<a class="headerlink" href="#Replacing-Bad-Values" title="Permalink to this headline">¶</a></h1>
<div class="line-block">
<div class="line">This is US wind turbine data. The numeric fields use -9999 as a null value for missing data. Using -9999 as a null value in numeric fields will cause big problems for any summary statistics like totals, means, etc, we should change that to something else, like np.NaN which Pandas sum and mean functions will automatically filter out.</div>
<div class="line">You can see that the means for before and after replacing -9999 with np.NaN are very different. You can use Janitor’s find_replace to easily replace them.</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">janitor</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
</div>
<section id="Load-Wind-Turbine-Data">
<h2>Load Wind Turbine Data<a class="headerlink" href="#Load-Wind-Turbine-Data" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">wind</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
    <span class="s2">&quot;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2018/2018-11-06/us_wind.csv&quot;</span>
<span class="p">)</span>
<span class="n">wind</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>case_id</th>
      <th>faa_ors</th>
      <th>faa_asn</th>
      <th>usgs_pr_id</th>
      <th>t_state</th>
      <th>t_county</th>
      <th>t_fips</th>
      <th>p_name</th>
      <th>p_year</th>
      <th>p_tnum</th>
      <th>...</th>
      <th>t_hh</th>
      <th>t_rd</th>
      <th>t_rsa</th>
      <th>t_ttlh</th>
      <th>t_conf_atr</th>
      <th>t_conf_loc</th>
      <th>t_img_date</th>
      <th>t_img_srce</th>
      <th>xlong</th>
      <th>ylat</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3073429</td>
      <td>missing</td>
      <td>missing</td>
      <td>4960</td>
      <td>CA</td>
      <td>Kern County</td>
      <td>6029</td>
      <td>251 Wind</td>
      <td>1987</td>
      <td>194</td>
      <td>...</td>
      <td>-9999.0</td>
      <td>-9999.0</td>
      <td>-9999.0</td>
      <td>-9999.0</td>
      <td>2</td>
      <td>3</td>
      <td>1/1/2012</td>
      <td>NAIP</td>
      <td>-118.360725</td>
      <td>35.083778</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3071522</td>
      <td>missing</td>
      <td>missing</td>
      <td>4997</td>
      <td>CA</td>
      <td>Kern County</td>
      <td>6029</td>
      <td>251 Wind</td>
      <td>1987</td>
      <td>194</td>
      <td>...</td>
      <td>-9999.0</td>
      <td>-9999.0</td>
      <td>-9999.0</td>
      <td>-9999.0</td>
      <td>2</td>
      <td>3</td>
      <td>1/1/2012</td>
      <td>NAIP</td>
      <td>-118.361168</td>
      <td>35.081512</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3073425</td>
      <td>missing</td>
      <td>missing</td>
      <td>4957</td>
      <td>CA</td>
      <td>Kern County</td>
      <td>6029</td>
      <td>251 Wind</td>
      <td>1987</td>
      <td>194</td>
      <td>...</td>
      <td>-9999.0</td>
      <td>-9999.0</td>
      <td>-9999.0</td>
      <td>-9999.0</td>
      <td>2</td>
      <td>3</td>
      <td>1/1/2012</td>
      <td>NAIP</td>
      <td>-118.360420</td>
      <td>35.084709</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3071569</td>
      <td>missing</td>
      <td>missing</td>
      <td>5023</td>
      <td>CA</td>
      <td>Kern County</td>
      <td>6029</td>
      <td>251 Wind</td>
      <td>1987</td>
      <td>194</td>
      <td>...</td>
      <td>-9999.0</td>
      <td>-9999.0</td>
      <td>-9999.0</td>
      <td>-9999.0</td>
      <td>2</td>
      <td>3</td>
      <td>7/31/2016</td>
      <td>Digital Globe</td>
      <td>-118.364029</td>
      <td>35.079418</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3005252</td>
      <td>missing</td>
      <td>missing</td>
      <td>5768</td>
      <td>CA</td>
      <td>Kern County</td>
      <td>6029</td>
      <td>251 Wind</td>
      <td>1987</td>
      <td>194</td>
      <td>...</td>
      <td>-9999.0</td>
      <td>-9999.0</td>
      <td>-9999.0</td>
      <td>-9999.0</td>
      <td>2</td>
      <td>3</td>
      <td>11/23/2017</td>
      <td>Digital Globe</td>
      <td>-118.354286</td>
      <td>35.085594</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 24 columns</p>
</div></div>
</div>
</section>
<section id="Check-Mean">
<h2>Check Mean<a class="headerlink" href="#Check-Mean" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">wind</span><span class="o">.</span><span class="n">t_hh</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
-1069.986537767466
</pre></div></div>
</div>
<p>The t_hh column appears to be affected by -9999 values. What are all the columns that are affected?</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="p">[</span><span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">wind</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="o">-</span><span class="mi">9999</span> <span class="ow">in</span> <span class="n">wind</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;usgs_pr_id&#39;, &#39;p_year&#39;, &#39;p_cap&#39;, &#39;t_cap&#39;, &#39;t_hh&#39;, &#39;t_rd&#39;, &#39;t_rsa&#39;, &#39;t_ttlh&#39;]
</pre></div></div>
</div>
<p>Note: When replacing the -9999 values you can make a copy of the dataframe to prevent making modifications to the original dataframe.</p>
<p>At first glance, it looks like the mean is negative, but this is only because of the bad values (-9999.0) throughout the column. To get the right mean, we should replace them!## Replace Bad Values with NaNs</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">mapping</span> <span class="o">=</span> <span class="p">{</span><span class="o">-</span><span class="mf">9999.0</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">}</span>
<span class="n">wind2</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">wind</span>
    <span class="o">.</span><span class="n">find_replace</span><span class="p">(</span>
        <span class="n">usgs_pr_id</span><span class="o">=</span><span class="n">mapping</span><span class="p">,</span>
        <span class="n">p_tnum</span><span class="o">=</span><span class="n">mapping</span><span class="p">,</span>
        <span class="n">p_cap</span><span class="o">=</span><span class="n">mapping</span><span class="p">,</span>
        <span class="n">t_cap</span><span class="o">=</span><span class="n">mapping</span><span class="p">,</span>
        <span class="n">t_hh</span><span class="o">=</span><span class="n">mapping</span><span class="p">,</span>
        <span class="n">t_rd</span><span class="o">=</span><span class="n">mapping</span><span class="p">,</span>
        <span class="n">t_rsa</span><span class="o">=</span><span class="n">mapping</span><span class="p">,</span>
        <span class="n">t_ttlh</span><span class="o">=</span><span class="n">mapping</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">wind2</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>case_id</th>
      <th>faa_ors</th>
      <th>faa_asn</th>
      <th>usgs_pr_id</th>
      <th>t_state</th>
      <th>t_county</th>
      <th>t_fips</th>
      <th>p_name</th>
      <th>p_year</th>
      <th>p_tnum</th>
      <th>...</th>
      <th>t_hh</th>
      <th>t_rd</th>
      <th>t_rsa</th>
      <th>t_ttlh</th>
      <th>t_conf_atr</th>
      <th>t_conf_loc</th>
      <th>t_img_date</th>
      <th>t_img_srce</th>
      <th>xlong</th>
      <th>ylat</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3073429</td>
      <td>missing</td>
      <td>missing</td>
      <td>4960.0</td>
      <td>CA</td>
      <td>Kern County</td>
      <td>6029</td>
      <td>251 Wind</td>
      <td>1987</td>
      <td>194</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2</td>
      <td>3</td>
      <td>1/1/2012</td>
      <td>NAIP</td>
      <td>-118.360725</td>
      <td>35.083778</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3071522</td>
      <td>missing</td>
      <td>missing</td>
      <td>4997.0</td>
      <td>CA</td>
      <td>Kern County</td>
      <td>6029</td>
      <td>251 Wind</td>
      <td>1987</td>
      <td>194</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2</td>
      <td>3</td>
      <td>1/1/2012</td>
      <td>NAIP</td>
      <td>-118.361168</td>
      <td>35.081512</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3073425</td>
      <td>missing</td>
      <td>missing</td>
      <td>4957.0</td>
      <td>CA</td>
      <td>Kern County</td>
      <td>6029</td>
      <td>251 Wind</td>
      <td>1987</td>
      <td>194</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2</td>
      <td>3</td>
      <td>1/1/2012</td>
      <td>NAIP</td>
      <td>-118.360420</td>
      <td>35.084709</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3071569</td>
      <td>missing</td>
      <td>missing</td>
      <td>5023.0</td>
      <td>CA</td>
      <td>Kern County</td>
      <td>6029</td>
      <td>251 Wind</td>
      <td>1987</td>
      <td>194</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2</td>
      <td>3</td>
      <td>7/31/2016</td>
      <td>Digital Globe</td>
      <td>-118.364029</td>
      <td>35.079418</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3005252</td>
      <td>missing</td>
      <td>missing</td>
      <td>5768.0</td>
      <td>CA</td>
      <td>Kern County</td>
      <td>6029</td>
      <td>251 Wind</td>
      <td>1987</td>
      <td>194</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2</td>
      <td>3</td>
      <td>11/23/2017</td>
      <td>Digital Globe</td>
      <td>-118.354286</td>
      <td>35.085594</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 24 columns</p>
</div></div>
</div>
</section>
<section id="Check-the-Mean-(again)">
<h2>Check the Mean (again)<a class="headerlink" href="#Check-the-Mean-(again)" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">wind2</span><span class="o">.</span><span class="n">t_hh</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
77.31203064391
</pre></div></div>
</div>
<p>And, now that the bad values were replaced by NaNs (which the mean() method ignores), the calculated mean is correct!</p>
</section>
<section id="Alternate-method">
<h2>Alternate method<a class="headerlink" href="#Alternate-method" title="Permalink to this headline">¶</a></h2>
<p>If we look at the description of the data (see <a class="reference external" href="https://github.com/rfordatascience/tidytuesday/blob/master/data/2018/2018-11-06/readme.md">README</a>) we can find descriptions for our data values, for example:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">p_year</span></code>: Year project became operational</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">t_hh</span></code>: Turbine hub height (meters)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xlong</span></code>: Longitude</p></li>
</ul>
<p>Using our knowledge of the data, this would give us bounds we could use for these values. For example, the oldest electric wind turbine was built in 1887 and this document was written in 2018, so <span class="math notranslate nohighlight">\(1887 \leq \text{p_year} \leq 2018\)</span>. Turbine hub height should be positive, and a value above 1 km would be silly, so <span class="math notranslate nohighlight">\(0 &lt; \text{t_hh} &lt; 1000\)</span>. These are wind turbines in the United States, so <span class="math notranslate nohighlight">\(-161.76 &lt; \text{xlong} &lt; -68.01\)</span>.</p>
<p>(Note that the README actually gives us minima and maxima for the data, so we could get much tighter bounds from that.)</p>
<p>To filter out potential bad values, we will use <code class="docutils literal notranslate"><span class="pre">update_where</span></code> to remove values outside these ranges.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Note that update_where mutates the original dataframe</span>
<span class="p">(</span>
    <span class="n">wind</span><span class="o">.</span><span class="n">update_where</span><span class="p">(</span>
        <span class="p">(</span><span class="n">wind</span><span class="p">[</span><span class="s1">&#39;p_year&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">1887</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">wind</span><span class="p">[</span><span class="s1">&#39;p_year&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">2018</span><span class="p">),</span> <span class="s1">&#39;p_year&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">update_where</span><span class="p">((</span><span class="n">wind</span><span class="p">[</span><span class="s1">&#39;t_hh&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">wind</span><span class="p">[</span><span class="s1">&#39;t_hh&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">1000</span><span class="p">),</span> <span class="s1">&#39;t_hh&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
    <span class="o">.</span><span class="n">update_where</span><span class="p">((</span><span class="n">wind</span><span class="p">[</span><span class="s1">&#39;xlong&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">161.76</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">wind</span><span class="p">[</span><span class="s1">&#39;xlong&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mf">68.01</span><span class="p">),</span> <span class="s1">&#39;xlong&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
</section>
<section id="Confirming-this-produces-the-same-result">
<h2>Confirming this produces the same result<a class="headerlink" href="#Confirming-this-produces-the-same-result" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">wind</span><span class="o">.</span><span class="n">t_hh</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
77.31203064391
</pre></div></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/logo_title.svg" alt="Logo"/>
    
  </a>
</p>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../notebooks.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="pyjanitor_intro.html">pyjanitor Usage Walkthrough</a></li>
<li class="toctree-l2"><a class="reference internal" href="Pivoting%20Data%20from%20Wide%20to%20Long.html">Pivot_Longer : One function to cover transformations from wide to long form.</a></li>
<li class="toctree-l2"><a class="reference internal" href="README.html">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="Row_to_Names.html">row_to_names : Elevates a row to be the column names of a DataFrame.</a></li>
<li class="toctree-l2"><a class="reference internal" href="anime.html">Processing Anime Data</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Replacing Bad Values</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Load-Wind-Turbine-Data">Load Wind Turbine Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Check-Mean">Check Mean</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Check-the-Mean-(again)">Check the Mean (again)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Alternate-method">Alternate method</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Confirming-this-produces-the-same-result">Confirming this produces the same result</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="bird_call.html">Processing Bird Call Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="board_games.html">Processing Board Game Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="dirty_data.html">Processing Dirty Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="expand_grid.html">Expand_grid : Create a dataframe from all combinations of inputs.</a></li>
<li class="toctree-l2"><a class="reference internal" href="french_trains.html">Processing French train data</a></li>
<li class="toctree-l2"><a class="reference internal" href="groupby_agg.html">Groupby_agg : Shortcut for assigning a groupby-transform to a new column.</a></li>
<li class="toctree-l2"><a class="reference internal" href="inflating_converting_currency.html">Inflating and Converting Currency</a></li>
<li class="toctree-l2"><a class="reference internal" href="medium_franchise.html">Tidy Up Web-Scraped Media Franchise Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="normalize.html">Normalization and Standardization</a></li>
<li class="toctree-l2"><a class="reference internal" href="sort_naturally.html">Using <code class="docutils literal notranslate"><span class="pre">sort_naturally</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="teacher_pupil.html">Processing International Teacher Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="transform_column.html">Transforming columns</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../authors.html">Contributors</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../notebooks.html">Examples</a><ul>
      <li>Previous: <a href="anime.html" title="previous chapter">Processing Anime Data</a></li>
      <li>Next: <a href="bird_call.html" title="next chapter">Processing Bird Call Data</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, PyJanitor devs.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.1.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/notebooks/bad_values.ipynb.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>